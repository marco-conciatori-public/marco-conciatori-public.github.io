<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mantis - Setup</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body class="antialiased">
<div id="navbar-placeholder"></div>

<div class="container mx-auto px-4 py-8">
    <div class="lg:grid lg:grid-cols-12 lg:gap-8">

        <aside class="hidden lg:block lg:col-span-2 lg:sticky lg:top-24 self-start">
            <nav class="p-4 rounded-lg bg-gray-50 border">
                <h4 class="element-title">Setup Guide</h4>
                <ul class="space-y-2" id="side-nav-links">
                    <li><a href="#original-robot" class="side-nav-link">Before you start</a></li>
                </ul>
            </nav>
        </aside>

        <main class="lg:col-span-10">
            <div class="bg-white p-8 sm:p-12 rounded-lg shadow-md">
                <h2 class="page-title">Complete Setup Guide for Mantis</h2>
                <p class="page-intro max-w-5xl">
                    This guide will explain step by step how to recreate my robot, including hardware and software.
                    I will explain in very fine detail how to set up the robot OS, install all the necessary libraries,
                    and run the code, because it is not simple and even small mistakes can lead to hours of debugging.
                    About the hardware, I will explain what components I used, but I won't go
                    into too much detail about how to assemble the robot, because I had to do a lot of trial and error
                    and manual adjustments (like adding new holes in the large chassis) that are difficult to explain.
                    <br>
                    Keep in mind this will only work for my latest version of the robot, which may include capabilities
                    you are not interested into, or require hardware that you don't have. If you want to make your own
                    changes, you will probably need to also change some code or libraries in the OS. For example, if you
                    only want to work with the RDK X3 robot without any physical addition, you could find the correct
                    commit of my GitHub repository that works with the original robot and use that, but I make no
                    guarantee it will have no problems.
                    <br>
                    As an advice, if you have to power-on the robot while cables are connected to it, make sure the
                    wheels are off the ground. In this way, even if it starts moving it won't cause damage.
                </p>

                <section id="original-robot" class="standard-section">
                    <h3 class="section-title">Before you start</h3>
                    <p class="standard-text">
                        You will need all the components listed as necessary in the
                        <a href="hardware.html#" class="standard-link">Hardware</a> section of this
                        website. You will also need a computer and Wi-Fi.
                        The hardware components
                        <br>

                    </p>

                    <h4 class="section-subtitle">PC connection</h4>
                    <p class="standard-text">
                        To access the robot OS from a computer there are several ways, but what I found most convenient
                        is with RealVNC viewer, a remote desktop application. Before that, however, the robot has to
                        already be connected to the same Wi-Fi network as your computer. To do this, I connected
                        a screen, mouse, and keyboard via cable directly to the robot, and then I connected it to my
                        Wi-Fi network from the robot's OS. While you are doing this, check the IP address of the robot
                        (you can find it in the Wi-Fi settings), you will need it later to connect with RealVNC.
                        With the full setup, you have to do this operation 2 times, one for the RDK X3 board, and one
                        for the Jetson Nano board. Afterward, you can access both boards from your computer with
                        RealVNC. Sometimes the VNC connection fails and you have to retry a few times.
                    </p>

                    <h4 class="section-subtitle">Save and write OS images</h4>
                    <p class="standard-text">
                        To use the OS images I provide, you will need to be able to write them to SD card and USB.
                        Even if you want to recreate your own by following the steps, errors happen, and they could have
                        serious consequences. I recommend you to become familiar with saving and loading OS images, and
                        do so frequently when you are making changes to the OS. They are checkpoints you can go back to
                        if something goes wrong.
                        <br>
                        You may have USB drives and SD cards, but once you can connect them to your pc, they can be
                        handled in the same way.
                        <br><strong>Note 1:</strong> I switch between Windows and Linux depending on the task, because
                        I find it easier. I will leave instructions for my way and for Linux only, but I don't know how
                        to save OS images from the robot to the pc with Windows.
                        <br><strong>Note 2:</strong> in my case, the USB and SD card become quite hot during the
                        operations, so much that I use a small fan to cool them down.
                        <br><strong>Flash memory on Windows (write an OS image from your pc to the robot memory):</strong>
                    </p>
                    <ul class="first-level">
                        <li> Connect the memory to your PC.</li>
                        <li> If it was already flashed with an OS image, follow these additional steps.
                            <ul class="second-level">
                                <li> Windows will see (and open) many partitions, all unreadable.</li>
                                <li> Close all those folders, and open "This PC"</li>
                                <li> Perform a quick format with standard settings on every visible partition of the
                                    memory. Careful not to format one of your hard drives!</li>
                                <li> Open "Disk Management": this tool allows you to view and modify the partitions on
                                    your drives</li>
                                <li> Remove every partition from the memory. You should do this for the partitions
                                    listed in the top view as well as those shown graphically in the bottom view of
                                    Disk Management.</li>
                                <li> Create a new simple partition ("FAT" file system).</li>
                                <li> Format the new partition with standard settings. Sometimes, you may need to do
                                    this twice for the drive to become readable by your system.</li>
                            </ul></li>
                        <li> Open Win32DiskImager, Rufus, or another similar tool. I use
                            <a href="https://win32diskimager.org/" class="standard-link">Win32DiskImager</a>.</li>
                        <li> Select your memory, choose the OS image file, and begin the flashing process. If you
                            are given a choice for the file system, always select FAT.</li>
                    </ul>
                    <p class="standard-text"><br><strong>On Linux (both flashing and cloning):</strong></p>
                    <ul class="first-level">
                        <li> Connect the memory to your PC.</li>
                        <li> Identify the name of the disk: use the terminal command <code class="code-inline">lsblk</code>. It will show all the
                            connected memory devices, find the correct one by watching the memory size.</li>
                        <li> Find currently mounted partitions with the command below. "X" is a letter that you will
                            know thanks to the previous command, substitute with the actual letter.
                            <pre class="code-block"><code>mount | grep /dev/sdX</code></pre>
                            es.
                            <pre class="code-block"><code>mount | grep /dev/sdd</code></pre></li>
                        <li>Unmount ALL partitions without removing the disk. "X" is the previous letter and "N" is a
                            number that you will know thanks to the previous command. Substitute them in the command.
                            If there are multiple partitions, you will need to repeat this command multiple times,
                            changing only the "N" number.
                            <pre class="code-block"><code>sudo umount /dev/sdXN</code></pre>
                            es.
                            <pre class="code-block"><code>sudo umount /dev/sdd1</code></pre></li>
                        <li> The command for flashing an OS image to the robot memory and for cloning the robot
                            memory to a file on your pc is the same, only the parameters are inverted.
                            <pre class="code-block"><code>sudo dd
    if=/dev/sdX
    of=PATH_TO_A_FOLDER/FILE_NAME.img
    status=progress</code></pre>
                            es.
                            <pre class="code-block"><code>sudo dd
    if=/dev/sdd
    of=/media/marco/DATA/robot_system_images/backup_30_06_2025.img
    status=progress</code></pre>
                            <br>In the command above, "if" is the input file, and "of" is the output file. If you want
                            to flash an OS image to the robot memory, you have to set "if" as the path to the OS
                            image file on your pc, and "of" as the robot memory ("/dev/sdX"). If you want to clone
                            the robot memory to a file on your pc, you have to set "if" as the robot memory
                            ("/dev/sdX"), and "of" as the path to a folder on your pc where you want to save the
                            image. The example above is for cloning the robot memory to a file on the pc.
                        </li>
                    </ul>
                    <p class="standard-text">
                        <strong>Note 1:</strong> The flashing/cloning can take some time, do not interrupt it. With
                        Win32DiskImager or the <code class="code-inline">status=progress</code> option, you can
                        see the progress.
                        <br><strong>Note 2:</strong> If you clone a smaller image into a bigger disk, you then have to use
                        the program "Gparted". Right-click on the main partition, select "move/resize" and expand it
                        over the unallocated memory. Otherwise, the extra memory will be unavailable. For example,
                        I changed the original 64GB SD card of the RDK X3 with a 128GB one, so I cloned the 64GB
                        image on my pc (just in case), then I flashed the same image to the 128GB SD card, and finally I
                        used <a href="https://gparted.org/" class="standard-link">Gparted</a> to expand the main
                        partition to use the full 128GB. This only work from a Linux pc, I don't know how to do it from
                        Windows.
                        <br><strong>Note 3:</strong> There is probably software to do this operation, but this worked
                        consistently for me, and it is not too difficult, so it is what I do.
                    </p>


                </section>

            </div>
        </main>
    </div>
</div>

<div id="footer-placeholder"></div>
<script src="main.js"></script>
</body>
</html>